<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="A human with a passion for open-ed, large datasets, and beautiful visualisations.">
    <meta name="author" content="Amelia Chu">
    <link rel="icon" href="https://ameliachu.github.io/assets/favicon.ico">

    <title>Amelia N Chu - Product Analyst - Humans. Data. Design.</title>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63886140-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());

      gtag('config', 'UA-63886140-1');
    </script>


    <!-- Bootstrap core CSS -->
    <link href="https://ameliachu.github.io/assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- MathJax JS-->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
    </script>

    <!--Font Awesome CSS-->
    <link href="https://ameliachu.github.io/assets/css/font-awesome.css" rel="stylesheet" type="text/css">

    <!-- Custom styles -->
    <link href="https://ameliachu.github.io/assets/css/navbar-fixed-top.css" rel="stylesheet">
    <link href="https://ameliachu.github.io/assets/css/css-custom.css" rel="stylesheet">

    <!-- Custom styles -->
    <script src="../assets/js/dygraph.min.js"></script>
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <link rel="stylesheet" href="../assets/css/dygraph.css" />

    <style>

    .bar {
      fill: steelblue;
    }

    .bar:hover {
      fill: brown;
    }

    .axis text {
      font: 10px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }
    </style>

  </head>
<body>
  <!-- Fixed navbar -->
  <nav class="navbar navbar-expand-md navbar-light fixed-top bg-light">
        <a class="navbar-brand" href="https://ameliachu.github.io/index.html"><img src="https://ameliachu.github.io/assets/img/lola.svg" height="32" width="32" alt="Lola."></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

      <div class="collapse navbar-collapse" id="navbarCollapse">

        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="https://www.linkedin.com/in/ameliachu"><i class="fa fa-linkedin"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="https://www.twitter.com/amelianchu"><i class="fa fa-twitter"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="https://www.github.com/ameliachu"><i class="fa fa-github"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="https://ameliachu.github.io/resume.html">resume</a></li>
          <li class="nav-item"><a class="nav-link" href="https://amelianchu.tumblr.com">unabridged.</a></li>
        </ul>
      </div><!--/.nav-collapse -->

  </nav> <!--/navigation-->

  <div class="container"><!--body -->
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong>Hello, there!</strong> I'm still working on adding in the rest of this paper and improving usability. Feel free to peruse in the meantime!
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

      <h5>Introduction</h5>
      <p>The data for this project was retrieved every minute via the real-time Citi Bike station status feed from April 7, 2018 to April 16, 2018.
        This feed scans for updates every 10 seconds and contains information on the availability of bikes and docks at each station in the Citi Bike system.
        The LaGuardia Pl & W 3 St Citi Bike station was selected because it had slightly above average bike capacity of 35 bikes (μ = 30.3), and appeared to be consistently used
        (Figure 1 & Figure 2a).
     </p>



  <div class="row"><!--Figure 2-->
    <div class="col-md-6 col-lg-3">
      <div class="card">
        <div class="card-body">
          <div id="status" style="height:200px;"></div>
        </div>

        <div class="card-footer text-muted">
          <small>Number of Bikes Available by Minute</small>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-lg-3">
      <div class="card">
        <div class="card-body">
          <div id="2b" style="height:200px;"></div>
        </div>

        <div class="card-footer text-muted">
           <small>Log of Bikes Available by Minute</small>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-lg-3">
      <div class="card">
        <div class="card-body">
          <div id="2c" style="height:200px;"></div>
        </div>

        <div class="card-footer text-muted">
           <small>Diff Log of Bikes Available by Minute</small>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-lg-3">
      <div class="card">
        <div class="card-body">
          <div id="2d" style="height:200px;"></div>
        </div>

        <div class="card-footer text-muted">
           <small>2 Diff Log of Bikes Available by Minute</small>
        </div>
      </div>
    </div>
  </div><!--END Figure 2-->
  <!--paragraph 2 -->

    <p>The field “num_bikes_available” was used for this project; this field contains the number of bikes available
      for rental at each station during any given time<sup>2</sup>. Since the feed only updates when there is a change (e.g. when
       a bike is rented or returned), the timestamp used for this project is based on the time of data retrieval
       (i.e. every minute), rather than the reported timestamp. This was done to ensure evenly spaced time intervals.</p>
    <h5> Part 1: Identify Potential p, d, q for an ARIMA(p, d, q) Model</h5>
    <p>To determine which ARIMA model is best suited for this dataset (n = 12995), we plot the monthly total trips, its log, and its difference (Figure 2).
      In the plot with the number of bike available by minute, there does appear to be some seasonality.
      The timeseries does appear to dip and rise in some periodic manner, but it does not appear to be completely consistent.
      For example, sometimes the lowest point on a day is around 8:00 UTC (e.g. April 9), other days it’s around 12:00 UTC (e.g. April 12), and on April 16
      it was on 3:00 UTC. The cycles do not appear to match a weekly cadence either: Monday, April 9 had the lowest point around 8:00 UTC compared to April 16 at 3:00 UTC,
      and Saturday, April 7 had the lowest point around 14:00 UTC compared to April 14 at 5:00 UTC. Since it is difficult to discern the seasonal pattern, we will not be making seasonal adjustments.
      It is also possible that weather temperature had an impact on the timeseries. For example, days with larger dips (e.g. April 12 -14) also happen to have warmer weather.  It also appears that when the there are more bikes available, the timeseries is more volatile, which is suggestive of level-dependent volatility and heteroskedasticity, thus it may be necessary to take logs of the data.
    </p>
    <p>
      Since the ACF plot of log bike available is hanging and the PACF drops off at lag 1, this suggests that we should take differences (Figure 3a & 3b).
      Observing the plots of the differenced data over time, it appears that both are mean reverting (Figure 2c & 2d). The twice differenced ACF show negative value at lag 1,
      which suggest overdifferencing. This suggested that we should set d = 1. Looking at the ACF and PACF plots of the differenced log bike available, it appears that both
      plots are dying down, suggestive of an ARMA model. To follow the guiding principle of parsimony, we will try parameters of 3 or less.
    </p>

  <!-- END paragraph 2 -->
  <!--Figure 3-->
      <ul class="nav nav-tabs nav-fill" id="meta-tab" role="tablist">
        <li class="nav-item">
          <a class="nav-item nav-link active" id="logsstatus-tab" data-toggle="tab" href="#logsstatus" role="tab">Log</a>
        </li>
        <li class="nav-item">
        <a class="nav-item nav-link" id="difflogsstatus-tab" data-toggle="tab" href="#difflogsstatus" role="tab">Diff</a>
        </li>
        <li class="nav-item">
        <a class="nav-item nav-link" id="diff2logsstatus-tab" data-toggle="tab" href="#diff2logsstatus" role="tab">Diff2</a>
        </li>
      </ul>
  <!--END Figure 3-->
  <!--MODAL FIGURE 3-->
  <div class="tab-content" id="meta-TabContent">
  <!--3a & 3b status TAB PANE-->
  <div class="tab-pane fade show active" id="logsstatus" role="tabpanel">
    <div class="row justify-content-md-center py-4">
      <div class="card-deck">

        <div class="card">
          <div class="card-body">
            <center><svg width="300" height="300" id="status-acf"></svg></center>
          </div>
          <div class="card-footer"><small class="text-muted">ACF</small></div>
        </div>

        <div class="card">
          <div class="card-body">
          <svg width="300" height="300" id="status-pacf"></svg>
        </div>
        <div class="card-footer"><small class="text-muted">PACF</small></div>
      </div>

          <script src="acf-pacf.js"></script>
          <script>
          acf ("logstatusac.csv" , "#status-acf")
          pacf ("logstatuspacf.csv" , "#status-pacf")
       </script>
       </div>
</div>
</div>
<!-- END 3a & 3b status TAB PANE-->
<!-- 3c & 3d status TAB PANE-->
<div class="tab-pane fade" id="difflogsstatus" role="tabpanel">
  <div class="row justify-content-md-center py-4">
    <div class="card-deck">
      <div class="card">
        <div class="card-body">
          <center><svg width="300" height="300" id="diffstatus-acf"></svg></center>
        </div>
        <div class="card-footer"><small class="text-muted">ACF</small></div>
      </div>
      <div class="card">
        <div class="card-body">
          <center><svg width="300" height="300" id="diffstatus-pacf"></svg></center>
        </div>
        <div class="card-footer"><small class="text-muted">PACF</small></div>
      </div>
          <script>
          acf ("difflogstatusacf.csv" , "#diffstatus-acf")
          pacf ("difflogstatuspacf.csv" , "#diffstatus-pacf")
          </script>
    </div><!--card-deck-->
  </div>

</div>
<!-- END 3c & 3d status TAB PANE-->
<!-- 3c & 3d status TAB PANE-->
  <div class="tab-pane fade" id="diff2logsstatus" role="tabpanel">
    <div class="row justify-content-md-center py-4">
      <div class="card-deck">
        <div class="card">
          <div class="card-body">
            <svg width="300" height="300" id="diff2status-acf"></svg>
          </div>
          <div class="card-footer"><small class="text-muted">ACF</small></div>
        </div>
        <div class="card">
          <div class="card-body">
            <svg width="300" height="300" id="diff2status-pacf"></svg>
          </div>
          <div class="card-footer"><small class="text-muted">PACF</small></div>
        </div>

      </div>
    </div>
  </div>


        <script>

        acf ("diff2logstatusacf.csv" , "#diff2status-acf")
        pacf ("diff2logstatuspacf.csv" , "#diff2status-pacf")

        </script>


</div>

  <!--END Figure 3 MODAL-->
  <!--Part 2: Using AICC to Identify Best p, q for ARIMA(p, 1, q) Model-->
  <h5>Part 2: Using AICC to Identify Best p, q for ARIMA(p, 1, q) Model</h5>
  <p>To help determine the exact $p$ and determine whether or not to include a constant we use AIC<sub>c</sub>. The candidate model with the lowest AIC<sub>c</sub> is ARIMA(3,1,3) without constant (-47050.73; Figure 4).
    Thus, we will select these parameters and obtain the model:</p>
  <p align = "center">$x_{t} = -0.6394x_{t-1} + 0.1644x_{t-2} + 0.599x_{t-3} + \varepsilon _{t} + 0.7143\varepsilon_{t-1} - 0.0968\varepsilon_{t-2}  - 0.0667\varepsilon_{t-3} $</p>
  <p>where $x_{t}$ is  $log bikes\_available_{t} - log bikes\_available_{t - 1}$ </p>
  <!--END Part 2: Using AICC to Identify Best p, q for ARIMA(p, 1, q) Model-->
<!--ARIMA AICC-->
    <div class="card">
      <h5 class="card-header">AIC<sub>C</sub> for Candidate ARIMA Models</h5>
      <div class="card-body">
        <p><svg width="20" height="15"><rect width="20" height="15" style="fill:steelblue" />Blue</svg>
          highlight indicates min AIC<sub>C</sub></p>
        <div class="table-responsive">
        <table class="table table-sm table-hover" id="arima-aicc"></table>
        </div>
      </div>
    </div>
<!--END ARIMA AICC-->

        <script type="text/javascript" src="arima-aicc.js"></script>


</div><!-- END body -->


<script type="text/javascript">
  a = new Dygraph(
    // containing div
    document.getElementById("status"),
    // CSV or path to a CSV file.
    "status_161.csv",
    {
     //title: 'Number of Bike Available (Minutes)',
     //ylabel: 'Number of Bike Available',
     axisLabelWidth:0
    }
  );
  b = new Dygraph(document.getElementById("2b"),"log_status_161.csv",
    {axisLabelWidth:0});
  c = new Dygraph(
    // containing div
    document.getElementById("2c"),
    // CSV or path to a CSV file.
    "difflogstatus.csv",
    {
     //title: 'Number of Bike Available (Minutes)',
     //ylabel: 'Number of Bike Available',
     axisLabelWidth:0
    }
  );
  d = new Dygraph(
    // containing div
    document.getElementById("2d"),
    // CSV or path to a CSV file.
    "diff2logstatus.csv",
    {
     //title: 'Number of Bike Available (Minutes)',
     //ylabel: 'Number of Bike Available',
     axisLabelWidth:0
    }
  );
</script>
<footer class="footer">
  <div class="container">
    <p class="text-muted">Amelia N Chu.</p>
  </div>
</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->

</body>
</html>
